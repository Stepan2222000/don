# Telegram Automation System - Configuration File
# Version: 1.0

# Лимиты и ограничения
limits:
  max_messages_per_hour: 25              # Сообщений в час на профиль
  max_cycles: 100                        # Количество циклов (проходов по всем чатам)
  delay_randomness: 0.2                # ±20% к рассчитанной задержке
  cycle_delay_minutes: 5              # Задержка между циклами (минуты)

# Таймауты
timeouts:
  search_timeout: 20                   # Таймаут поиска чата (секунды)
  send_timeout: 5                      # Таймаут отправки сообщения
  page_load_timeout: 30                # Таймаут загрузки страницы

# Telegram
telegram:
  url: "https://web.telegram.org/k"

# Повторные попытки
retry:
  enabled: true                       # Повторять ли неудачные попытки
  max_attempts: 3                      # Максимум попыток
  delay_between_retries: 60            # Задержка между попытками (секунды)
  max_attempts_before_block: 3         # Блокировать чат после N неудачных попыток

# Скриншоты
screenshots:
  enabled: true                        # Включить/выключить скриншоты
  on_error: true                       # Скриншоты при ошибках
  on_warning: true                     # Скриншоты при предупреждениях (чат не найден)
  on_debug: false                      # Отладочные скриншоты
  full_page: true                      # Скриншот всей страницы
  quality: 80                          # Качество (0-100)
  format: "png"                        # png/jpeg
  max_age_days: 30                     # Удалять скриншоты старше N дней

# Логирование
logging:
  level: "DEBUG"                        # DEBUG/INFO/WARNING/ERROR
  format: "%(asctime)s | %(name)s | %(levelname)s | %(message)s"

# База данных
database:
  type: "postgresql"                   # postgresql или sqlite
  # PostgreSQL настройки
  postgresql:
    host: "81.30.105.134"
    port: 5432
    database: "telegram_ras"
    user: "admin"
    password: "Password123"
  # SQLite настройки (для локальной разработки, если нужно)
  sqlite:
    path: "db/telegram_automation.db"
    wal_mode: true

# Управление прокси
proxy:
  enabled: false                       # Глобальный переключатель прокси (true/false)
  disabled_profiles: []                # Список UUID профилей без прокси
  pool_file: "data/proxies.txt"        # Файл с прокси (host:port:user:pass)
  min_attempts_for_check: 10           # Мин. попыток перед анализом
  chat_not_found_threshold: 40         # % chat_not_found для ротации
  unblock_tasks_on_rotate: true        # Разблокировать задачи при ротации
  health_reset_hours: 1                # Через сколько часов дать "второй шанс"
